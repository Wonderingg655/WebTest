<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script src="https://code.jquery.com/jquery-3.3.1.min.js"" charset="utf-8"> </script>

    <link rel="stylesheet" href="style.css">

    <script src="DragDropTouch.js"></script>

    <script type="text/javascript">
        function show(a) {
            $.post("pro.php", {
                num: a
            }, function(data) {
                $("#show1").html(data);
            });
        }

        document.onload = show("");

        /* var intervalId = window.setInterval(function() { //run command every 0.5 sec      stop command clearInterval(intervalId) 
             run();
             alert("1");
         }, 500);*/
    </script>

    <title>Web Game</title>
</head>

<body>
    <div class="NavBar">
        <div>บทที่ 1 การตกแต่งตัวอักษร</div>
    </div>

    <div class="gridContainer">
        <div class="conright2" id="gridItem1">
            <div class="headerRight">โค้ดคำสั่ง</div>
            <div class="codeRed">
                &lt;<mark>html</mark>&gt;<br>
                &emsp;&lt;<mark>body</mark>&gt;<br>
                &emsp;&lt;<mark>p</mark>
                <div id="conright"></div>&nbsp;&gt;&nbsp;Hello World&nbsp;&lt;<mark>/p</mark>&gt;<br>
                &emsp;&lt;<mark>/body</mark>&gt;<br>
                &lt;<mark>/html</mark>&gt;<br>
            </div>
        </div>

        <div class="conans" id="gridItem2">
            <div class="headerAns">ผลลัพธ์</div>
            <p id="show1"></p>
        </div>

        <div class="conconleft" id="gridItem3">
            <div class="headerBlock">บล็อกคำสั่ง</div>
            <div id="conleft">
                <div class="list1" id="L0" draggable="true">
                    background-color:
                    <select id="DropdownMenu1" onchange="run();">
                        <option>Black</option>
                        <option selected="selected">Grey</option>
                        <option>White</option>
                        <option>Red</option>
                        <option>Pink</option>
                        <option>Orange</option>
                        <option>Yellow</option>
                        <option>Green</option>
                        <option>Aqua</option>
                        <option>Blue</option>
                        <option>Purple</option>
                    </select>&nbsp;; <br>
                    <p class="Ldescription">เปลี่ยนสีพื้นหลังของตัวอักษร</p>
                </div>
                <div class="list1" id="L1" draggable="true">
                    color:
                    <select id="DropdownMenu2" onchange="run();">
                        <option>Black</option>
                        <option selected="selected">Grey</option>
                        <option>White</option>
                        <option>Red</option>
                        <option>Pink</option>
                        <option>Orange</option>
                        <option>Yellow</option>
                        <option>Green</option>
                        <option>Aqua</option>
                        <option>Blue</option>
                        <option>Purple</option>
                    </select>&nbsp;; <br>
                    <p class="Ldescription">เปลี่ยนสีตัวอักษร</p>
                </div>
                <div class="list1" id="L3" draggable="true">
                    style&nbsp;= &quot;&nbsp;<div id="conrightE"></div>&nbsp;&quot; <br>
                    <p class="Ldescription">คำสั่งตกแต่งเว็บเพจ</p>
                </div>
                <div class="list1" id="L4" draggable="true">
                    text-align:
                    <select id="DropdownMenu3" onchange="run();">
                        <option>left</option>
                        <option selected="selected">center</option>
                        <option>right</option>
                    </select>&nbsp;; <br>
                    <p class="Ldescription">จัดตำแหน่งอักษร</p>
                </div>

                <div class="list1" id="L5" draggable="true">
                    font-size:
                    <input type="text" id="DropdownMenu4" onkeyup="run();">
                    &nbsp;; <br>
                    <p class="Ldescription">ปรับขนาดตัวอักษร</p>
                </div>
            </div>
        </div>
    </div>
    <script>
        let lists1 = document.getElementsByClassName("list1");
        let rightBox = document.getElementById("conright");
        let rightBoxE = document.getElementById("conrightE");
        let leftBox = document.getElementById("conleft");

        for (list1 of lists1) {
            list1.addEventListener("dragstart", function(e) {
                let selected = e.target;

                rightBox.addEventListener("dragover", function(e) {
                    e.preventDefault();
                });
                rightBox.addEventListener("drop", function(e) {
                    if (selected.id == "L3" && rightBox.childElementCount < 10) {
                        rightBox.appendChild(selected);
                        selected = null;
                        run();
                    } else selected = null;
                });

                leftBox.addEventListener("dragover", function(e) {
                    e.preventDefault();
                });
                leftBox.addEventListener("drop", function(e) {
                    leftBox.appendChild(selected);
                    selected = null;
                    run();
                });

                rightBoxE.addEventListener("dragover", function(e) {
                    e.preventDefault();
                });
                rightBoxE.addEventListener("drop", function(e) {
                    if (rightBoxE.childElementCount < 10) { //limit item in continer 
                        rightBoxE.appendChild(selected);
                        selected = null;
                        run();
                    } else {
                        selected = null;
                    }
                });
            })
        }

        let DropdownMenu1 = document.getElementById("DropdownMenu1");
        let DropdownMenu2 = document.getElementById("DropdownMenu2");
        let DropdownMenu3 = document.getElementById("DropdownMenu3");
        let DropdownMenu4 = document.getElementById("DropdownMenu4");

        function run() {
            var text1 = DropdownMenu1.options[DropdownMenu1.selectedIndex].text;
            var text2 = DropdownMenu2.options[DropdownMenu2.selectedIndex].text;
            var text3 = DropdownMenu3.options[DropdownMenu3.selectedIndex].text;
            var text4 = DropdownMenu4.value;
            let textApp = '';

            if (rightBox.querySelector("#L3") != null) {
                textApp = textApp.concat('style="');

                if (rightBoxE.querySelector("#L0") != null)
                    textApp = textApp.concat("background:", text1, ";");
                if (rightBoxE.querySelector("#L1") != null)
                    textApp = textApp.concat("color:", text2, ";");
                if (rightBoxE.querySelector("#L4") != null)
                    textApp = textApp.concat("text-align:", text3, ";");
                if (rightBoxE.querySelector("#L5") != null)
                    textApp = textApp.concat("font-size:", text4, ";");

                textApp = textApp.concat('"');
            }
            show(textApp);

            if (rightBoxE.childElementCount > 0) rightBoxE.style.background = '#96d4e9';
            else rightBoxE.style.background = 'white';

            if (rightBox.childElementCount > 0) rightBox.style.background = '#90dfb5';
            else rightBox.style.background = 'white';
        }
    </script>
</body>


</html>